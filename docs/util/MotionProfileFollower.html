<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Thu Jul 13 10:40:43 PDT 2017 -->
<title>MotionProfileFollower</title>
<meta name="date" content="2017-07-13">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MotionProfileFollower";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MotionProfileFollower.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../util/MotionProfileFollower.PeriodicRunnable.html" title="class in util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?util/MotionProfileFollower.html" target="_top">Frames</a></li>
<li><a href="MotionProfileFollower.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">util</div>
<h2 title="Class MotionProfileFollower" class="title">Class MotionProfileFollower</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>util.MotionProfileFollower</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">MotionProfileFollower</span>
extends java.lang.Object</pre>
<div class="block">Used to push motionProfile points to the buffer in the CANTalons and execute them
 when the talon is in motion profile mode</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Trevor</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.PeriodicRunnable.html" title="class in util">MotionProfileFollower.PeriodicRunnable</a></span></code>
<div class="block">Lets create a periodic task to funnel our trajectory points into our talon.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_bStart">_bStart</a></span></code>
<div class="block">If start() gets called, this flag is set and in the control() we will
 service it.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_loopTimeout">_loopTimeout</a></span></code>
<div class="block">Any time you have a state machine that waits for external events, its a
 good idea to add a timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) edu.wpi.first.wpilibj.Notifier</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_notifer">_notifer</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.ctre.CANTalon.SetValueMotionProfile</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_setValue">_setValue</a></span></code>
<div class="block">Since the CANTalon.set() routine is mode specific, deduce what we want
 the set value to be and let the calling module apply it whenever we
 decide to switch to MP mode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_state">_state</a></span></code>
<div class="block">State machine to make sure we let enough of the motion profile stream to
 talon before we fire it.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.ctre.CANTalon.MotionProfileStatus</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_status">_status</a></span></code>
<div class="block">The status of the motion profile executer and buffer inside the Talon.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.ctre.CANTalon</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#Z:Z_talon">_talon</a></span></code>
<div class="block">reference to the talon we plan on manipulating.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#kMinPointsInTalon">kMinPointsInTalon</a></span></code>
<div class="block">How many trajectory points do we wait for before firing the motion
 profile.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#kNumLoopsTimeout">kNumLoopsTimeout</a></span></code>
<div class="block">Just a state timeout to make sure we don't get stuck anywhere.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#points">points</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#MotionProfileFollower-com.ctre.CANTalon-double-">MotionProfileFollower</a></span>(com.ctre.CANTalon&nbsp;talon,
                     double&nbsp;pathDt)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#control--">control</a></span>()</code>
<div class="block">Called every loop.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>com.ctre.CANTalon.SetValueMotionProfile</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#getSetValue--">getSetValue</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#reset--">reset</a></span>()</code>
<div class="block">Called to clear Motion profile buffer and reset state info during
 disabled and when Talon is not in MP control mode.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#setPoints-double:A:A-">setPoints</a></span>(double[][]&nbsp;points)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#startFilling--">startFilling</a></span>()</code>
<div class="block">Start filling the MPs to all of the involved Talons.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#startFilling-double:A:A-int-">startFilling</a></span>(double[][]&nbsp;profile,
            int&nbsp;totalCnt)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../util/MotionProfileFollower.html#startMotionProfile--">startMotionProfile</a></span>()</code>
<div class="block">Called by application to signal Talon to start the buffered MP (when it's
 able to).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Z:Z_status">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_status</h4>
<pre>private&nbsp;com.ctre.CANTalon.MotionProfileStatus _status</pre>
<div class="block">The status of the motion profile executer and buffer inside the Talon.
 Instead of creating a new one every time we call getMotionProfileStatus,
 keep one copy.</div>
</li>
</ul>
<a name="Z:Z_talon">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_talon</h4>
<pre>private&nbsp;com.ctre.CANTalon _talon</pre>
<div class="block">reference to the talon we plan on manipulating. We will not changeMode()
 or call set(), just get motion profile status and make decisions based on
 motion profile.</div>
</li>
</ul>
<a name="Z:Z_state">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_state</h4>
<pre>private&nbsp;int _state</pre>
<div class="block">State machine to make sure we let enough of the motion profile stream to
 talon before we fire it.</div>
</li>
</ul>
<a name="Z:Z_loopTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_loopTimeout</h4>
<pre>private&nbsp;int _loopTimeout</pre>
<div class="block">Any time you have a state machine that waits for external events, its a
 good idea to add a timeout. Set to -1 to disable. Set to nonzero to count
 down to '0' which will print an error message. Counting loops is not a
 very accurate method of tracking timeout, but this is just conservative
 timeout. Getting time-stamps would certainly work too, this is just
 simple (no need to worry about timer overflows).</div>
</li>
</ul>
<a name="Z:Z_bStart">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_bStart</h4>
<pre>private&nbsp;boolean _bStart</pre>
<div class="block">If start() gets called, this flag is set and in the control() we will
 service it.</div>
</li>
</ul>
<a name="Z:Z_setValue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_setValue</h4>
<pre>private&nbsp;com.ctre.CANTalon.SetValueMotionProfile _setValue</pre>
<div class="block">Since the CANTalon.set() routine is mode specific, deduce what we want
 the set value to be and let the calling module apply it whenever we
 decide to switch to MP mode.</div>
</li>
</ul>
<a name="kMinPointsInTalon">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>kMinPointsInTalon</h4>
<pre>private static final&nbsp;int kMinPointsInTalon</pre>
<div class="block">How many trajectory points do we wait for before firing the motion
 profile.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#util.MotionProfileFollower.kMinPointsInTalon">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="kNumLoopsTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>kNumLoopsTimeout</h4>
<pre>private static final&nbsp;int kNumLoopsTimeout</pre>
<div class="block">Just a state timeout to make sure we don't get stuck anywhere. Each loop
 is about 20ms.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#util.MotionProfileFollower.kNumLoopsTimeout">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="points">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>points</h4>
<pre>private&nbsp;double[][] points</pre>
</li>
</ul>
<a name="Z:Z_notifer">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>_notifer</h4>
<pre>edu.wpi.first.wpilibj.Notifier _notifer</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MotionProfileFollower-com.ctre.CANTalon-double-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MotionProfileFollower</h4>
<pre>public&nbsp;MotionProfileFollower(com.ctre.CANTalon&nbsp;talon,
                             double&nbsp;pathDt)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>talon</code> - reference to Talon object to fetch motion profile status from.</dd>
<dd><code>pathDt</code> - the dt between each point in the path</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()</pre>
<div class="block">Called to clear Motion profile buffer and reset state info during
 disabled and when Talon is not in MP control mode.</div>
</li>
</ul>
<a name="control--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>control</h4>
<pre>public&nbsp;void&nbsp;control()</pre>
<div class="block">Called every loop.</div>
</li>
</ul>
<a name="startFilling--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startFilling</h4>
<pre>private&nbsp;void&nbsp;startFilling()</pre>
<div class="block">Start filling the MPs to all of the involved Talons.</div>
</li>
</ul>
<a name="startFilling-double:A:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startFilling</h4>
<pre>private&nbsp;void&nbsp;startFilling(double[][]&nbsp;profile,
                          int&nbsp;totalCnt)</pre>
</li>
</ul>
<a name="startMotionProfile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startMotionProfile</h4>
<pre>public&nbsp;void&nbsp;startMotionProfile()</pre>
<div class="block">Called by application to signal Talon to start the buffered MP (when it's
 able to).</div>
</li>
</ul>
<a name="setPoints-double:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPoints</h4>
<pre>public&nbsp;void&nbsp;setPoints(double[][]&nbsp;points)</pre>
</li>
</ul>
<a name="getSetValue--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSetValue</h4>
<pre>public&nbsp;com.ctre.CANTalon.SetValueMotionProfile&nbsp;getSetValue()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the output value to pass to Talon's set() routine. 0 for disable
         motion-profile output, 1 for enable motion-profile, 2 for hold
         current motion profile trajectory point.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MotionProfileFollower.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../util/MotionProfileFollower.PeriodicRunnable.html" title="class in util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?util/MotionProfileFollower.html" target="_top">Frames</a></li>
<li><a href="MotionProfileFollower.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
